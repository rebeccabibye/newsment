{% extends 'blog/base.html' %}
{% load static %}
{% load poll_extras2 %}
{% block content %}

	<div class="container">
		<div class="form-group">
				<form action="{% url 'search' %}" method="post">{% csrf_token %}
                <div style="width: 100%" class="search-container">
                    <div class="search">
                    <input required name="search" type="text" id="zip-code-input" placeholder="Search Newsment">
                    <button type="submit" style="border:0; background: transparent;"><i class="fa fa-search"></i> </button> </a>
                </div>
                </form>
            </div>
                <br>
		{% if results or resultss or resultsss%}
        {% for result in results %}
        <div class="search-result-profile">
            <div
                    style="padding-left: 0px !important;"
                    class="col-8 no-padding d-flex align-items-center">
                <img
                    class="rounded-circle mr-2"
                    style="width: 40px; height: 40px;"
                    src="{{ result.profile.image.url }}">
                <a class="mr-2 white-important" href="{% url 'user-posts' result.username %}">
                    {{ result.username }}
                </a>
            </div>
        </div>
        {% endfor %}
    
        {% for result in resultsss %}

        <article class="media content-section hovered-tweet">
            <div style="width: 100%; word-break: break-all;">

                <div class="pb-2 row m-0" style="width: 100%; margin-right: 0 !important;">
                   <div
                           style="padding-left: 0px !important;"
                           class="col-8 no-padding d-flex align-items-center">
                       <img
                           class="rounded-circle mr-2"
                           style="width: 20px; height: 20px;"
                           src="{{ result.author.profile.image.url }}">
                       <a class="mr-2 white-important" href="{% url 'user-posts' result.author %}">
                           {{ result.author }}
                       </a>
                   </div>
                   <div class="col-4 d-flex flex-row-reverse no-padding align-items-center"
                        style="padding-right: 0 !important;">
                       {% if result.author == user %}
                            <a class="material-icons ml-2"
                               style="font-size: 14px"
                                    href="{% url 'post-delete' result.id %}">clear</a>
                            <a class="material-icons ml-2"
                               style="font-size: 14px"
                                    href="{% url 'post-update' result.id %}">update</a>
                        {%  endif %}
                   </div>
               </div>
                <div
                        class="mb-2"
                        style="width: 100%; height: 1px; background-color: rgba(255, 255, 255, 0.1)"></div>
                <a
                        style="color: rgba(255, 255, 255, 0.5) !important;"
                        href="{% url 'post-detail' result.id %}">
                    <p class="mb-4">
                        <p style="font-size:18px">{{ var | TitleOfArticle2:result.content }}</p>
                        {{ result.content }}
                    </p>
                </a>

                    <div class="row">
                        <div class="col-6" style="display: flex;">
                            <small style="opacity: 0.4;">

                                <!-- Like Buttons Here -->
                                <a href="#" onClick="document.getElementById('likebutton').submit()">No Bias: <i class="fas fa-thumbs-up"></i></a> {{result.likes}}   |   <a href="#" onClick="document.getElementById('dislikebutton').submit()"><i class="fas fa-thumbs-down"></i></a> {{result.dislikes}}


                                <form id="likebutton" method="POST" action="{% url 'postpreference' result.id 1 %}">
                                {% csrf_token %}
                                <input type="hidden">
                                </form>

                                <form id="dislikebutton" method="POST" action="{% url 'postpreference' result.id 2 %}">
                                {% csrf_token %}
                                <input type="hidden">
                                </form>


                            </small>
                            <small style="opacity: 0.4; margin-left:15px;">
                                <a href="/post/{{result.id}}/">
                                    <i style=" font-size: 16px;" class="far fa-comment"></i> {{ result.number_of_comments }} comment(s)
                                </a>

                            </small>
                        </div>
                        <div class="col-6">
                            <small
                                    style="opacity: 0.4;"
                                class="white-important d-flex full-width flex-row-reverse">
                                {{ result.date_posted | date:"H:i l, d.m.y" }}
                            </small>
                        </div>
                    </div>

            </div>
        </article>

        {% endfor %}

		{% else %}
			<div class="alert alert-info" role="alert">
			  No result, please try to search again!
			</div>
		{% endif %}
	</div>

{% endblock %}